#!/Users/maxcohen/element/venvs/venv1/bin/python

from openai import OpenAI

client = OpenAI()

completion = client.chat.completions.create(
    model="ft:gpt-4o-2024-08-06:personal:elementv5:Ag377yRC",
    messages=[
        {"role": "system", "content": "try to use sensor data if provided to make a better more accurate conclusion. accuracy is the most important. Also aim to give the user a specific issue they are able to fix and focus on like replacing or mending a component."},
        {
            "role": "user",
            "content": "I have a catylitic converter engine light please diagnose my car's issue please use this engine data to refine your diagnosis OBD Volts: 13 V | Calculated Engine Load: 28.63% | Coolant Temperature: 206.6 °F | Short Term Fuel Trim (STFT) Bank 1: 2.34% | Long Term Fuel Trim (LTFT) Bank 1: 1.56% | Manifold Absolute Pressure (MAP): 8.11 psi | Engine RPM: 831 rpm | Speed: 0 km/h | Timing Advance: 6 ° | Intake Air Temperature: 127.4 °F | Mass Air Flow (MAF) Rate: 3.4 g/sec | Throttle Position: 22.75% | Oxygen Sensor 1 Voltage (Bank 1): 0.79 V | Oxygen Sensor 1 Trim (Bank 1): 2.34% | Oxygen Sensor 2 Voltage (Bank 1): 0.11 V | Oxygen Sensor 2 Trim (Bank 1): % | Distance Traveled with MIL On: 497 km | EVAP Purge: 23% | Number of Warm-Ups Since Codes Cleared: 255 | Distance Traveled Since Codes Cleared: 44,265 km | Barometric Pressure: 14.5 psi | Catalytic Converter Temperature (Bank 1 Sensor 1): 933.8 °F | ECU Voltage: 14.09 V | Absolute Load Value: 30.59% | Fuel/Air Commanded Ratio: 14.63 | Relative Throttle Position: 10% | Ambient Air Temperature: 71.6 °F | Absolute Throttle Position B: 22% | Absolute Throttle Position D: 20% | Absolute Throttle Position E: 10% | Throttle Actuator: 14% | Intake Air Temperature B1S1: 127.4 °F | Intake Air Temperature B1S2: 141.8 °F | Intake Air Temperature B1S3: 93.2 °F | Intake Air Temperature B2S1: °F (not reported) | Intake Air Temperature B2S2: °F (not reported) | Intake Air Temperature B2S3: °F (not reported) | Fuel Level Input: 51% | Reset Trip: (Empty) | Average Fuel Consumption: ∞ L/100 km (error reading) | Average Fuel Consumption (Total): ∞ L/100 km (error reading) | Average Fuel Consumption (10 sec): ∞ L/100 km (error reading) | Average Speed: 0 km/h | Calculated Boost: -6.22 psi | Instant Fuel Consumption: ∞ L/100 km (error reading) | Instant Fuel Rate: 0.32 gal/h | Distance to Empty: [Empty] | Distance Traveled: 0 km | Total Distance Traveled: 0 km | Engine RPM x1000: 0.8 rpm | Free Space in Fuel Tank: 24.5 gallons | Fuel Economizer (Based on Throttle Position): 1 | Fuel Level Input (V): 25.5 gallons | Fuel Used: 0.01 gallons | Total Fuel Used: 0.01 gallons | Fuel Used Price: 0.03 $ | Total Fuel Used Price: 0.02 $ | Power (Fuel): 4.81 hp | Power from MAF: 4.38 hp | Vehicle Acceleration: 0 g | Elapsed Time Since Engine Start: 276 seconds | Knock Retard: 0° | ATF Temperature (var.1): 158 °F | ATF Temperature (var.2): 158 °F | ATF Temperature (var.3): 158 °F | ATF Temperature (var.4): 158 °F | ATF Temperature (var.5): 158 °F | A/C High Pressure: 197.96 psi | Knock Retard: 0° | H2OS Sensor: 794.22 mV | Misfire Cyl 1 History: 0 | Misfire Cyl 2 History: 0 | Misfire Cyl 3 History: 0 | Misfire Cyl 4 History: 0 | Misfire Cyl 5 History: 0 | Misfire Cyl 6 History: 0 | Misfire Cyl 7 History: 0 | Misfire Cyl 8 History: 0 | Misfire Cyl 1 Current: 0 | Misfire Cyl 2 Current: 0 | Misfire Cyl 3 Current: 0 | Misfire Cyl 4 Current: 0 | Misfire Cyl 5 Current: 0 | Misfire Cyl 6 Current: 0 | Misfire Cyl 7 Current: 0 | Misfire Cyl 8 Current: 0 | Transmission Fluid Temperature (7E2): 70°F | Current Gear var.2: 1 | Current Gear var.3: 0 | EGR Duty Cycle: 0% | EGR V: 0 V | Air Conditioning High Side Pressure: 175.74 psi | Engine Oil Pressure: 0 psi | Engine Oil Temperature: 210.2 °F | ATF Temperature (var.6): 167°F | E85 (Alcohol) Content in Fuel: 9.8% | Odometer (engine unit): 99,483.17 km | Catalytic Converter Temperature (Bank 1 Sensor 1): 933.8°F | Barometric Pressure: 14.5 psi | Number of Warm-Ups Since Codes Cleared: 255 remember to keep it short and consise please also consider that the obvious issue may not be the true issue the catylitic converter is not the issue the maf sensor is"       }
    ]
)

print(completion.choices[0].message)